% rebase('base.html')
<!-- slices: { 0: { color: '#0077c8' }, 1: { color: '#e6e6e6' } },-->
<script type="">
</script>
<script type="text/javascript">
    google.charts.load("current", { packages: ["corechart"] });
    google.charts.setOnLoadCallback(drawChart);
    google.charts.setOnLoadCallback(drawGraph);
    function drawChart(total, pdv) {
        var options = {
            pieSliceText: "none",
            pieHole: 0.4,
            slices: { 0: { color: '#0077c8' }, 1: { color: '#e6e6e6' } },
            colors: ['#0077c8', '#e6e6e6'],
            backgroundColor: 'transparent',
            legend: 'none',
        };
        function drawChart(containerId, data, options) {
            var chart = new google.visualization.PieChart(document.getElementById(containerId));
            chart.draw(data, options);
        }

        % for vitamin, dataDict in vitamin_totals.items():
            var data = google.visualization.arrayToDataTable([
                ['Vitamini', 'PDV'],
                ["{{vitamin}}", {{dataDict['total']}}], // pdv
                ["{{vitamin}} PDV", {{0 if dataDict['total'] - dataDict['pdv'] > 0 else dataDict['pdv']}}], // total
            ]);
            drawChart("{{vitamin}}", data, options);
        %end

        % for mineral, dataDict in mineral_totals.items():
            var data = google.visualization.arrayToDataTable([
                ['Minerali', 'PDV %'],
                ["{{mineral}}", {{dataDict['total']}}], // pdv
                ["{{mineral}} PDV", {{0 if dataDict['total'] - dataDict['pdv'] > 0 else dataDict['pdv']}}], // total
            ]);
            drawChart("{{mineral}}", data, options);
        %end
    }
    function drawGraph() {

            var data = google.visualization.arrayToDataTable([
                ['Hranila', 'Zaužita vrednost', 'PDV'],
                ['Vlaknine', {{ other_totals['fiber_g']['total']  }}, {{ other_totals['fiber_g']['pdv']  }}],
                ['Ogljikovi hidrati', {{ other_totals['carbohydrate_g']['total']  }}, {{ other_totals['carbohydrate_g']['pdv']  }}],
                ['Proteini', {{ other_totals['protein_g']['total']  }}, {{ other_totals['protein_g']['pdv']  }}],
            ]);
        var options = {
            colors: ['#0077c8', '#ADD8E6'],
            hAxis: {
                format: '###g'
            }
        };

        var chart = new google.visualization.BarChart(document.getElementById('myGraph'));
        chart.draw(data, options);
    }
</script>
<h1>Vitamini</h1>
<div class="row">
    <div class="column">
        <div class="card">
            <div id="vitamin_a_IU" style="width: 150px; height: 150px;"></div>
            <h1>Vitamin A</h1>
        </div>
        <div class="card">
            <div id="vitamin_b6_mg" style="width: 150px; height: 150px;"></div>
            <h1>Vitamin B6</h1>
        </div>
        <div class="card">
            <div id="vitamin_b12_mcg" style="width: 150px; height: 150px;"></div>
            <h1>Vitamin B12</h1>
        </div>
        <div class="card">
            <div id="vitamin_c_mg" style="width: 150px; height: 150px;"></div>
            <h1>Vitamin C</h1>
        </div>
        <div class="card">
            <div id="vitamin_d_IU" style="width: 150px; height: 150px;"></div>
            <h1>Vitamin D</h1>
        </div>
        <div class="card">
            <div id="vitamin_e_mg" style="width: 150px; height: 150px;"></div>
            <h1>Vitamin E</h1>
        </div>
        <div class="card">
            <div id="vitamin_k_mcg" style="width: 150px; height: 150px;"></div>
            <h1>Vitamin K</h1>
        </div>
    </div>
</div>
<h1>Minerali</h1>
<div class="row">
    <div class="column">
        <div class="card">
            <div id="magnesium_mg" style="width: 150px; height: 150px;"></div>
            <h1>Magnezij</h1>
        </div>
        <div class="card">
            <div id="calcium_mg" style="width: 150px; height: 150px;"></div>
            <h1>Kalcij</h1>
        </div>
        <div class="card">
            <div id="iron_mg" style="width: 150px; height: 150px;"></div>
            <h1>Železo</h1>
        </div>
        <div class="card">
            <div id="potassium_mg" style="width: 150px; height: 150px;"></div>
            <h1>Kalij</h1>
        </div>
        <div class="card">
            <div id="zink_mg" style="width: 150px; height: 150px;"></div>
            <h1>Cink</h1>
        </div>
        <div class="card">
            <div id="sodium_mg" style="width: 150px; height: 150px;"></div>
            <h1>Natrij</h1>
        </div>
    </div>
</div>
<h1 style = "margin-top: 15px;">Proteini, Ogljikovi hidrati in Vlaknine(g)</h1>
<div class="row">
    <div class="column">
        <div id="myGraph" style="width:100%; max-width:600px; height:500px;"></div>
        <div>
            <div class = "card" style = "margin: 20px;  height: 100px; background-color: lightblue" ><br><h2 style = "margin: 20px;"> Potrebne kalorije: {{ int(other_totals['calories']['pdv']) }} kcal</h2></div>
            <div class = "card" style = "margin: 20px;  height: 100px; background-color: lightblue" ><br><h2 style = "margin: 20px;"> Zaužite kalorije: {{ int(other_totals['calories']['total']) }} kcal</h2></div>
        </div>
        <div>
            <div class = "card" style = "margin: 20px;  height: 100px; background-color: lightblue">
                    <br>
                    <h2 style = "margin: 20px;"> Aktivnosti</h2>
            
        </div>
            <div style = "overflow: auto; width: 300px; height: 300px;">
                % for act in activity:
                    <div class = "card" style = "margin: 20px;  height: auto">
                        <br>
                        <h2 style = "margin: 20px;"> {{ act[0] }} </h2>
                    </div>
                % end
            </div>
        </div>
        <div class = "card" style = "margin: 20px;  height: 100px; background-color: lightblue" ><br><h2 style = "margin: 20px;"> Počutje: {{ feel }} </h2></div>
    </div>
    
    <div class="column">
        
    </div>
</div>